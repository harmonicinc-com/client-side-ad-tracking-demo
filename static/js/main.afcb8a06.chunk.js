(this["webpackJsonpclient-side-ad-tracking-demo"]=this["webpackJsonpclient-side-ad-tracking-demo"]||[]).push([[0],{125:function(e,t,n){},126:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(45),c=n.n(i),o=n(200),s=(n(125),n(126),n(106)),u=n(199),d=n(221),l=n(202),f=n(212),v=n(209),h=n(211),j=n(203),p=n(213),m=n(4),b=n(31),O=n(12),x=n(214),g=n(206),T=n(215),y=n(216),k=n(218),S=n(98),P=n.n(S),w=n(97),E=n.n(w),R=n(101),U=n.n(R),I=n(102),C=n.n(I),L=n(100),D=n.n(L),M=n(99),B=n.n(M),N=n(84),A=n.n(N),F=n(85),q=n.n(F),H=r.a.createContext(void 0),G=n(2),W=Object(l.a)((function(){return{itemText:{fontSize:13,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},podItem:{},podItemOnAir:{backgroundColor:"#42a5f5","&:hover":{background:"#2196f3"}},adItem:{paddingLeft:ke.spacing(4)},adItemOnAir:{paddingLeft:ke.spacing(4),backgroundColor:"#90caf9","&:hover":{background:"#64b5f6"}},trackingUrlItem:{paddingLeft:ke.spacing(8),paddingTop:ke.spacing(0),paddingBottom:ke.spacing(1)},greenIcon:{color:"green"},redIcon:{color:"red"}}}));var V=function(){var e=W(),t=Object(a.useContext)(H);if(void 0===t)throw new Error("AdTrackingContext is undefined");var n=Object(a.useState)({}),r=Object(O.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)({}),s=Object(O.a)(o,2),u=s[0],d=s[1],l=t.adPods||[],f=t.lastPlayheadTime,v=t.lastPrftPlayheadTime,h=t.presentationStartTime,j=function(e){if(e.id in i)return i[e.id];var t=e.prftStartTime?v:f;return null!==t&&t<e.startTime+e.duration+2e3},p=function(e,t){if(t.id+"/"+e.id in u)return u[t.id+"/"+e.id];var n=t.prftStartTime?v:f;return null!==n&&n<e.startTime+e.duration+2e3},S=function(e){return new Date(e.prftStartTime?e.prftStartTime:e.startTime+h).toLocaleString()},w=function(t){var n=t.prftStartTime?v:f,a=t.prftStartTime||t.startTime;return a<n&&n<a+t.duration?e.podItemOnAir:e.podItem};return Object(G.jsx)("div",{className:"ad-pod-list",children:l?Object(G.jsx)(x.a,{children:l.map((function(t){return Object(G.jsxs)("div",{children:[Object(G.jsxs)(g.a,{button:!0,onClick:function(){return function(e){var t=Object(b.a)(Object(b.a)({},i),{},Object(m.a)({},e.id,!j(e)));Object.keys(i).filter((function(e){return!l.find((function(t){return t.id===e}))})).forEach((function(e){return delete t[e]})),c(t)}(t)},className:w(t),children:[Object(G.jsx)(T.a,{children:Object(G.jsx)(E.a,{})}),Object(G.jsxs)(y.a,{disableTypography:!0,className:e.itemText,children:[Object(G.jsxs)("div",{children:["Ad Pod: ",t.id]}),Object(G.jsxs)("div",{children:["Time: ",S(t),", Duration: ",(t.duration/1e3).toFixed(1),"s"]})]}),j(t)?Object(G.jsx)(A.a,{}):Object(G.jsx)(q.a,{})]}),Object(G.jsx)(k.a,{in:j(t),timeout:"auto",unmountOnExit:!0,children:Object(G.jsx)(x.a,{children:t.ads.map((function(n){return Object(G.jsxs)("div",{children:[Object(G.jsxs)(g.a,{button:!0,onClick:function(){return function(e,t){var n=Object(b.a)(Object(b.a)({},u),{},Object(m.a)({},t.id+"/"+e.id,!p(e,t)));Object.keys(u).filter((function(e){return!l.find((function(t){return e.startsWith(t.id+"/")}))})).forEach((function(e){return delete n[e]})),d(n)}(n,t)},className:w(n),children:[Object(G.jsx)(T.a,{children:Object(G.jsx)(P.a,{})}),Object(G.jsxs)(y.a,{disableTypography:!0,className:e.itemText,children:[Object(G.jsxs)("div",{children:["Ad: ",n.id]}),Object(G.jsxs)("div",{children:["Time: ",S(n),", Duration: ",(n.duration/1e3).toFixed(1),"s"]})]}),p(n,t)?Object(G.jsx)(A.a,{}):Object(G.jsx)(q.a,{})]}),Object(G.jsx)(k.a,{in:p(n,t),timeout:"auto",unmountOnExit:!0,children:Object(G.jsx)(x.a,{children:n.trackingEvents?n.trackingEvents.map((function(t,n){return Object(G.jsxs)(g.a,{className:e.trackingUrlItem,children:[Object(G.jsxs)(T.a,{children:["IDLE"===t.reportingState?Object(G.jsx)(B.a,{}):null,"REPORTING"===t.reportingState?Object(G.jsx)(D.a,{}):null,"DONE"===t.reportingState?Object(G.jsx)(U.a,{className:e.greenIcon}):null,"ERROR"===t.reportingState?Object(G.jsx)(C.a,{className:e.redIcon}):null]}),Object(G.jsxs)(y.a,{disableTypography:!0,className:e.itemText,children:[Object(G.jsxs)("div",{children:["Event: ",t.event]}),Object(G.jsxs)("div",{children:["URL: ",t.signalingUrls]}),t.startTime?Object(G.jsxs)("div",{children:["Time: ",S(t)]}):null]})]},n)})):null})},n.id+".trackingUrls")]},n.id)}))})},t.id+".ads")]},t.id)}))}):null})},z=r.a.createContext({errors:{},reportError:function(){},acknowledgeError:function(){}});function J(e){var t=Object(a.useState)({}),n=Object(O.a)(t,2),r=n[0],i=n[1];return Object(G.jsx)(z.Provider,{value:{errors:r,reportError:function(e,t){i(Object(b.a)(Object(b.a)({},r),{},Object(m.a)({},e,{message:t,acknowledged:!1})))},acknowledgeError:function(e){var t=r[e];t&&i(Object(b.a)(Object(b.a)({},r),{},Object(m.a)({},e,Object(b.a)(Object(b.a)({},t),{},{acknowledged:!0}))))}},children:e.children})}var $=n(14),_=n(38),K=n(24),Q=n.n(K),X=n(16);var Y=function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current&&n.current()}),t);return function(){return clearInterval(e)}}}),[t])},Z=r.a.createContext(void 0),ee=n(50),te=n(33),ne=500,ae=function(e,t){for(var n=!1,a=function(a){var r=e[a].id;t.find((function(e){return e.id===r}))||(e.splice(a,1),n=!0)},r=e.length-1;r>=0;r--)a(r);return t.forEach((function(t){var a=e.find((function(e){return e.id===t.id}));a?a.duration!==t.duration&&(a.duration=t.duration,n=!0):(a={id:t.id,prftStartTime:t.prftStartTime,startTime:t.prftStartTime||t.startTime,duration:t.duration,trackingEvents:t.trackingEvents.map((function(e){return{event:e.event,prftStartTime:e.prftStartTime,startTime:e.prftStartTime||e.startTime,duration:e.duration,signalingUrls:e.signalingUrls,reportingState:"IDLE"}}))},e.push(a),n=!0)})),n},re=function(){function e(){Object(ee.a)(this,e),this.adPods=void 0,this.lastPlayheadTime=void 0,this.lastPrftPlayheadTime=void 0,this.presentationStartTime=void 0,this.lastPlayheadUpdateTime=void 0,this.listeners=void 0,this.adPods=[],this.lastPlayheadTime=0,this.presentationStartTime=0,this.lastPrftPlayheadTime=0,this.lastPlayheadUpdateTime=0,this.listeners=[]}return Object(te.a)(e,[{key:"addUpdateListener",value:function(e){this.listeners.push(e)}},{key:"removeUpdateListener",value:function(e){var t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}},{key:"updatePods",value:function(e){var t=function(e,t){for(var n=!1,a=function(a){var r=e[a].id;t.find((function(e){return e.id===r}))||(e.splice(a,1),n=!0)},r=e.length-1;r>=0;r--)a(r);return t.forEach((function(t){var a=e.find((function(e){return e.id===t.id}));a?a.duration!==t.duration&&(a.duration=t.duration,n=!0):(a={id:t.id,prftStartTime:t.prftStartTime,startTime:t.prftStartTime||t.startTime,duration:t.duration,ads:[]},e.push(a),n=!0),n=ae(a.ads,t.ads)||n})),n}(this.adPods,e);t&&this.notifyListeners()}},{key:"needSendBeacon",value:function(e){var t=this,n=(new Date).getTime();if(this.lastPlayheadUpdateTime){if(n===this.lastPlayheadUpdateTime)return;var a=(e-this.lastPlayheadTime)/(n-this.lastPlayheadUpdateTime);a>0&&a<=2&&this.iterateTrackingEvents((function(n){var a=n.startTime,r=a+(n.duration||1e3);"IDLE"===n.reportingState&&a<=e&&e<=r&&t.sendBeacon(n)}),this.lastPlayheadTime,e)}this.lastPlayheadTime=e,this.lastPlayheadUpdateTime=n}},{key:"updatePlayheadTime",value:function(e){this.needSendBeacon(e)}},{key:"updatePrftPlayheadTime",value:function(e){this.needSendBeacon(e)}},{key:"updateRawPlayheadTime",value:function(e){this.needSendBeacon(e)}},{key:"updatePresentationStartTime",value:function(e){this.presentationStartTime=e}},{key:"getAdPods",value:function(){return this.adPods}},{key:"pause",value:function(){var e=this;this.iterateTrackingEvents((function(t){"pause"===t.event&&e.sendBeacon(t)}))}},{key:"resume",value:function(){var e=this;this.iterateTrackingEvents((function(t){"resume"===t.event&&e.sendBeacon(t)}))}},{key:"mute",value:function(){var e=this;this.iterateTrackingEvents((function(t){"mute"===t.event&&e.sendBeacon(t)}))}},{key:"unmute",value:function(){var e=this;this.iterateTrackingEvents((function(t){"unmute"===t.event&&e.sendBeacon(t)}))}},{key:"notifyListeners",value:function(){this.listeners.forEach((function(e){e()}))}},{key:"iterateTrackingEvents",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPlayheadTime,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.lastPlayheadTime;this.adPods.forEach((function(a){var r=a.startTime;r<=n&&t<=r+a.duration+ne&&a.ads.forEach((function(r){var i=r.startTime;i<=n&&t<=i+r.duration+ne&&r.trackingEvents.forEach((function(t){e(t,r,a)}))}))}))}},{key:"sendBeacon",value:function(){var e=Object(_.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.reportingState="REPORTING",this.notifyListeners(),e.prev=2,e.next=5,Promise.all(t.signalingUrls.map(function(){var e=Object(_.a)(Q.a.mark((function e(t){var n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(!((n=e.sent).status<200&&n.status>299)){e.next=6;break}throw console.error("Failed to send beacon to ".concat(t,"; Status ").concat(n.status)),new Error("Failed to send beacon to ".concat(t,"; Status ").concat(n.status));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:t.reportingState="DONE",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),t.reportingState="ERROR";case 11:this.notifyListeners();case 12:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ie=function(e){var t=5e3,n=Object(X.e)(),r=Object(X.f)(),i=new URLSearchParams(r.search).get("url"),c=Object(a.useContext)(z),o=Object(a.useRef)(),s=Object(a.useState)(0),u=Object(O.a)(s,2),d=u[0],l=u[1],f=Object(a.useState)({localSessionId:"",mediaUrl:i,manifestUrl:null,adTrackingMetadataUrl:""}),v=Object(O.a)(f,2),h=v[0],j=v[1],p=Object(a.useState)(0),m=Object(O.a)(p,2),b=m[0],x=m[1],g=Object(a.useState)(0),T=Object(O.a)(g,2),y=T[0],k=T[1],S=Object(a.useState)([]),P=Object(O.a)(S,2),w=P[0],E=P[1],R=Object(a.useState)({start:0,end:0}),U=Object(O.a)(R,2),I=U[0],C=U[1],L=function(e){return e.replace(/\/[^/?]+(\??[^/]*)$/,"/metadata$1")},D=Object(a.useCallback)(function(){var e=Object(_.a)(Q.a.mark((function e(n){var a,r,i,s,u,d=arguments;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d.length>1&&void 0!==d[1]?d[1]:0,r=d.length>2&&void 0!==d[2]&&d[2],i=function(e,n,a){if(0===e)return!0;var r=a||I;return n&&r.prftStart&&r.prftEnd?e>=r.prftStart&&e<=r.prftEnd-t:e>=r.start&&e<=r.end-t},console.log("refreshMetadata: ".concat(n)),!n){e.next=27;break}return e.prev=5,e.next=8,fetch(n);case 8:if(!((s=e.sent).status<200||s.status>299)){e.next=11;break}throw new Error("Get unexpected response code ".concat(s.status));case 11:return e.next=13,s.json();case 13:if(u=e.sent,C(u.dataRange),i(a,r,u.dataRange)){e.next=18;break}return console.log("Invalid metadata: Not in range. Time: ".concat(a,", PRFT: ").concat(r),u.dataRange),e.abrupt("return",!1);case 18:if(void 0===o.current){e.next=21;break}return o.current.updatePods(u.adBreaks||[]),e.abrupt("return",!0);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(5),console.error("Failed to download metadata for ad tracking",e.t0),c.reportError("metadata.request.failed","Failed to download metadata for ad tracking: "+e.t0);case 27:return e.abrupt("return",!1);case 28:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(t){return e.apply(this,arguments)}}(),[c,I]),M=Object(a.useCallback)(function(){var e=Object(_.a)(Q.a.mark((function e(t){var n,a,r,i;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{redirect:"follow",cache:"reload"});case 3:if(!((r=e.sent).status<200||r.status>299)){e.next=6;break}throw new Error("Get unexpected response code ".concat(r.status));case 6:r.redirected?(n=r.url,a=L(r.url)):(n=t,a=L(t)),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),c.reportError("manifest.request.failed","Failed to download manifest: "+e.t0),e.abrupt("return");case 13:if(!n.includes("index.m3u8")){e.next=16;break}return e.next=16,fetch(n.replace("index.m3u8","01.m3u8"));case 16:return E([]),o.current=new re,i=o.current.getAdPods(),o.current.addUpdateListener((function(){E(Object($.a)(i))})),j({localSessionId:(new Date).toISOString(),mediaUrl:t,manifestUrl:n,adTrackingMetadataUrl:a}),e.next=23,D(a);case 23:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[D,c]);Object(a.useEffect)((function(){h.mediaUrl&&!h.localSessionId&&M(h.mediaUrl)}),[M,h]),Y(Object(_.a)(Q.a.mark((function e(){var n,a;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e,n){return n&&I.prftStart&&I.prftEnd?e>=I.prftStart&&e<=I.prftEnd-t:e>=I.start&&e<=I.end-t},console.log("PRFT: ".concat(y,"; In range: ").concat(n(y,!0))),console.log("Raw: ".concat(b,"; In range: ").concat(n(b,!1))),a=h.adTrackingMetadataUrl){e.next=6;break}return e.abrupt("return");case 6:if(!(I.prftStart&&I.prftEnd&&y>0)){e.next=17;break}if(e.t0=!n(y,!0),!e.t0){e.next=12;break}return e.next=11,D(a,y,!0);case 11:e.t0=!e.sent;case 12:if(!e.t0){e.next=15;break}a="".concat(a,"&prftStart=").concat(y),D(a);case 15:e.next=25;break;case 17:if(e.t1=b&&!n(b,!1),!e.t1){e.next=22;break}return e.next=21,D(a,b,!1);case 21:e.t1=!e.sent;case 22:if(!e.t1){e.next=25;break}a="".concat(a,"&start=").concat(b),D(a);case 25:case"end":return e.stop()}}),e)}))),4e3);var B={sessionInfo:h,presentationStartTime:d,load:function(e){return n.replace("?url="+encodeURIComponent(e)),M(e)},unload:function(){E([]),o.current=new re;var e=o.current.getAdPods();o.current.addUpdateListener((function(){E(Object($.a)(e))})),l(0),j({localSessionId:"",mediaUrl:null,manifestUrl:null,adTrackingMetadataUrl:""})}},N={adPods:w,lastPlayheadTime:b,lastPrftPlayheadTime:y,presentationStartTime:d,updatePlayheadTime:function(e){x(e)},updatePrftPlayheadTime:function(e){k(e)},updatePresentationStartTime:function(e){l(e)},needSendBeacon:function(e){var t;return null===(t=o.current)||void 0===t?void 0:t.needSendBeacon(e)},pause:function(){var e;return null===(e=o.current)||void 0===e?void 0:e.pause()},resume:function(){var e;return null===(e=o.current)||void 0===e?void 0:e.resume()},mute:function(){var e;return null===(e=o.current)||void 0===e?void 0:e.mute()},unmute:function(){var e;return null===(e=o.current)||void 0===e?void 0:e.unmute()}};return Object(G.jsx)(Z.Provider,{value:B,children:Object(G.jsx)(H.Provider,{value:N,children:e.children})})},ce=n(104),oe=n(107),se=(n(136),n(105)),ue=n.n(se),de=n(70),le=n.n(de),fe=function(e){Object(ce.a)(n,e);var t=Object(oe.a)(n);function n(e){var r;return Object(ee.a)(this,n),(r=t.call(this,e)).player=void 0,r.videoRef=void 0,r.containerRef=void 0,r.lastMuted=void 0,r.paused=void 0,r.videoRef=Object(a.createRef)(),r.containerRef=Object(a.createRef)(),r.player=null,r.lastMuted=!1,r.paused=!1,r}return Object(te.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.muxjs=ue.a;var t=this.videoRef.current,n=this.containerRef.current;if(t&&n&&(this.player=new le.a.Player(t),this.player.configure("manifest.defaultPresentationDelay",12),this.player.configure("manifest.dash.ignoreSuggestedPresentationDelay",!0),this.lastMuted=t.muted,this.player)){var a=new le.a.ui.Overlay(this.player,n,t);a.configure({controlPanelElements:["play_pause","mute","volume","fullscreen","overflow_menu"]}),t.addEventListener("error",(function(t){var n,a;return null===(n=(a=e.props).onError)||void 0===n?void 0:n.call(a,t)})),t.addEventListener("playing",(function(){var t,n,r;null!==(t=a.getControls())&&void 0!==t&&t.isSeeking()||e.paused&&(null===(n=(r=e.props).onResume)||void 0===n||n.call(r),e.paused=!1)})),t.addEventListener("pause",(function(){var t,n,r;null!==(t=a.getControls())&&void 0!==t&&t.isSeeking()||(null===(n=(r=e.props).onPaused)||void 0===n||n.call(r),e.paused=!0)})),t.addEventListener("volumechange",(function(){var n,a;if(t.muted&&!e.lastMuted)null===(n=(a=e.props).onMute)||void 0===n||n.call(a);else if(!t.muted&&e.lastMuted){var r,i;null===(r=(i=e.props).onUnmute)||void 0===r||r.call(i)}e.lastMuted=t.muted}))}}},{key:"load",value:function(e){var t;null===(t=this.player)||void 0===t||t.load(e),this.paused=!1}},{key:"unload",value:function(){var e;null===(e=this.player)||void 0===e||e.unload(),this.paused=!1}},{key:"getPlayheadTimeAsDate",value:function(){var e;return(null===(e=this.player)||void 0===e?void 0:e.getPlayheadTimeAsDate())||null}},{key:"getRawVideoTime",value:function(){var e;return(null===(e=this.videoRef.current)||void 0===e?void 0:e.currentTime)||null}},{key:"getPresentationLatencyInfo",value:function(){var e;return(null===(e=this.player)||void 0===e?void 0:e.getPresentationLatencyInfo())||null}},{key:"getPresentationStartTime",value:function(){var e;return null===(e=this.player)||void 0===e?void 0:e.getPresentationStartTimeAsDate()}},{key:"render",value:function(){return Object(G.jsx)("div",{ref:this.containerRef,style:{maxWidth:this.props.width},children:Object(G.jsx)("video",{"data-shaka-player":!0,ref:this.videoRef,style:{width:"100%",height:"100%",backgroundColor:"black"},autoPlay:!0})})}}]),n}(a.Component);var ve=function(){var e=Object(a.useContext)(Z);if(void 0===e)throw new Error("SessionContext is undefined");var t=e.sessionInfo,n=Object(a.useContext)(H);if(void 0===n)throw new Error("SessionContext is undefined");var r=Object(a.useRef)(null),i=Object(a.useRef)(),c=Object(a.useState)(0),o=Object(O.a)(c,2),s=o[0],u=o[1],d=Object(a.useState)(0),l=Object(O.a)(d,2),f=l[0],v=l[1],h=Object(a.useState)(0),j=Object(O.a)(h,2),p=j[0],m=j[1],b=Object(a.useState)(null),x=Object(O.a)(b,2),g=x[0],T=x[1],y=function(){var e=0;if("HLS"===g)e=f;else{if("DASH"!==g)return 1/0;e=p||1e3*s}return Math.min.apply(Math,[1/0].concat(Object($.a)(n.adPods.filter((function(t){return t.startTime>e})).map((function(e){return e.startTime})))))-e};return Y((function(){var e,a=null===(e=r.current)||void 0===e?void 0:e.getRawVideoTime();a&&function(e){var a,i;if(u(e),null!==(a=t.manifestUrl)&&void 0!==a&&a.includes(".m3u8")){var c,o,s=(null===(c=r.current)||void 0===c||null===(o=c.getPlayheadTimeAsDate())||void 0===o?void 0:o.getTime())||0;n.updatePlayheadTime(s),n.needSendBeacon(s),v(s),T("HLS")}else if(null!==(i=t.manifestUrl)&&void 0!==i&&i.includes(".mpd")){var d,l,f,h,j=(null===(d=r.current)||void 0===d||null===(l=d.getPresentationLatencyInfo())||void 0===l?void 0:l.wallClock.getTime())||0,p=1e3*e,b=(null===(f=r.current)||void 0===f||null===(h=f.getPresentationStartTime())||void 0===h?void 0:h.getTime())||0,O=p+b;n.updatePrftPlayheadTime(j),n.updatePlayheadTime(p),n.updatePresentationStartTime(b),n.needSendBeacon(j>0?j:p),m(j),v(O),T("DASH")}}(a)}),500),Object(a.useEffect)((function(){r.current&&i.current!==t.localSessionId&&(t.manifestUrl?r.current.load(t.manifestUrl):r.current.unload(),i.current=t.localSessionId)}),[r,t]),Object(G.jsxs)("div",{children:[Object(G.jsx)(fe,{ref:r,onPaused:function(){console.log("playback paused"),n.pause()},onResume:function(){console.log("playback resumed from pause"),n.resume()},onMute:function(){console.log("player muted"),n.mute()},onUnmute:function(){console.log("player unmute"),n.unmute()},onError:function(e){console.error("Error from player",e)}}),Object(G.jsxs)("div",{children:["Raw currentTime from video element: ",s?s.toFixed(0):0,"s"]}),Object(G.jsxs)("div",{children:["Playhead date time: ",f?new Date(f).toLocaleString():"-"]}),Object(G.jsxs)("div",{children:["PRFT Wall Clock: ",p?new Date(p).toLocaleString():"-"]}),Object(G.jsxs)("div",{children:["Time to next ad break: ",y()!==1/0?Math.ceil(y()/1e3).toFixed(0)+"s":"-"]})]})},he=n(207),je=n(217),pe=n(201),me=n(219),be=n(210),Oe=n(220),xe=n(204),ge=Object(l.a)((function(){return{buttons:{"& > *":{marginRight:ke.spacing(1)}}}}));var Te=function(){var e=ge(),t=Object(a.useContext)(z),n=Object(a.useContext)(Z);if(void 0===n)throw new Error("SessionContext is undefined");var r=n.sessionInfo,i=Object(a.useRef)(),c=function(e){return e.preventDefault()},o=function(){var e=Object(_.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.load(i.current.value);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(G.jsxs)("div",{children:[Object.entries(t.errors).map((function(e,n){var a=Object(O.a)(e,2),r=a[0],i=a[1];return Object(G.jsx)(he.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:!i.acknowledged,children:Object(G.jsx)(xe.a,{elevation:6,variant:"filled",severity:"error",onClose:function(){return e=r,void t.acknowledgeError(e);var e},children:i.message})},n)})),Object(G.jsx)(je.a,{variant:"h5",gutterBottom:!0,children:"Harmonic Client Side Ad Tracking Demo"}),Object(G.jsx)(pe.a,{inputRef:i,label:"Media URL",fullWidth:!0,defaultValue:r.mediaUrl||"",variant:"standard"}),Object(G.jsxs)(me.a,{className:e.buttons,width:1,paddingTop:2,display:"flex",flexDirection:"row",children:[Object(G.jsx)(be.a,{variant:"contained",color:"primary",onClick:o,children:"Load"}),Object(G.jsx)(be.a,{variant:"contained",color:"secondary",onClick:function(){n.unload()},children:"Unload"})]}),Object(G.jsx)(me.a,{width:1,paddingTop:2,display:"flex",flexDirection:"row",children:Object(G.jsx)(Oe.a,{href:"#",color:"inherit",onClick:c,underline:"hover",children:r.manifestUrl?r.manifestUrl:""})}),Object(G.jsx)(me.a,{width:1,paddingTop:1,display:"flex",flexDirection:"row",children:Object(G.jsx)(Oe.a,{href:"#",color:"inherit",onClick:c,underline:"hover",children:r.adTrackingMetadataUrl?r.adTrackingMetadataUrl:""})})]})},ye=n(80),ke=Object(s.a)({palette:{primary:{main:"#3f51b5"},secondary:{main:"#e0e0e0"}}}),Se=Object(l.a)((function(){return{paper:{padding:ke.spacing(2),textAlign:"center",color:ke.palette.text.secondary}}}));var Pe=function(){var e=Se();return Object(G.jsx)(u.a,{injectFirst:!0,children:Object(G.jsx)(d.a,{theme:ke,children:Object(G.jsx)(ye.a,{basename:"/client-side-ad-tracking-demo",children:Object(G.jsx)(X.a,{exact:!0,path:"/",children:Object(G.jsx)(J,{children:Object(G.jsx)(ie,{children:Object(G.jsx)(f.a,{children:Object(G.jsxs)(v.a,{container:!0,spacing:3,children:[Object(G.jsx)(v.a,{item:!0,xs:12,children:Object(G.jsx)(h.a,{square:!0,className:e.paper,children:Object(G.jsx)(Te,{})})}),Object(G.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(G.jsx)(h.a,{square:!0,className:e.paper,children:Object(G.jsx)(ve,{})})}),Object(G.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(G.jsxs)(h.a,{square:!0,className:e.paper,children:[Object(G.jsx)(j.a,{value:0,indicatorColor:"primary",textColor:"primary",children:Object(G.jsx)(p.a,{label:"Tracking Events"})}),Object(G.jsx)(V,{})]})})]})})})})})})})})},we=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,222)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};console.log=function(){},console.debug=function(){},c.a.render(Object(G.jsxs)(r.a.StrictMode,{children:[Object(G.jsx)(o.a,{}),Object(G.jsx)(Pe,{})]}),document.getElementById("root")),we()}},[[139,1,2]]]);
//# sourceMappingURL=main.afcb8a06.chunk.js.map